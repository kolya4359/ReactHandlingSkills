# 프록시(proxy) 설정

백엔드 서버는 4000 포트, 개발 서버는 3000 포트로 열려 있기 때문에 별도의 설정 없이 API를 호출하려고 하면 오류가 발생한다.  
이 오류를 CORS(Cross Origin Request) 오류라고 부른다. 네트워크 요청을 할 때 주소가 다른 경우에 발생한다.  
이 오류를 해결하려면 다른 주소에서도 API를 호출할 수 있도록 서버 쪽 코드를 수정해야 한다.  
프록시라는 기능은 웹팩 개발 서버에서 지원하는 기능이다.  
개발 서버로 요청하는 API들을 우리가 프록시로 정해 둔 서버로 그대로 전달해 주고 그 응답을 웹 애플리케이션에서 사용할 수 있게 해준다.

CRA로 만든 프로젝트에서 프록시를 설정할 때는 package.json 파일을 수정하면 된다.

> "proxy": "http://localhost:4000/"

이렇게 하면 리액트 애플리케이션에서 client.get('/api/posts')를 하면, 웹팩 개발 서버가 프록시 역할을 해서  
http://localhost:4000/api/posts에 대신 요청한 뒤 결과물을 응답해 준다.

# 로그인 상태 유지하기 (localStorage 사용)

페이지를 새로고침했을 때도 로그인 상태를 유지하려면, 리액트 앱이 브라우저에서 맨 처음 렌더링될 때 localStorage에서 값을 불러와 리덕스 스토어 안에 넣도록 구현해야 한다.  
이 작업은 App 컴포넌트에서 useEffect를 사용하여 처리하거나, App 컴포넌트를 클래스형 컴포넌트로 변환하여 componentDidMount 메서드를 만들고 그 안에서 처리해도 된다.  
이 프로젝트에서는 엔트리 파일인 index.js에서 처리했다.  
왜냐하면, componentDidMount와 useEffect는 컴포넌트가 한 번 렌더링된 이후에 실행되기 때문이다.  
이 경우에는 사용자가 아주 짧은 깜박임 현상(로그인이 나타났다가 로그아웃이 나타나는 현상)을 경험할 수도 있다. index.js에서 사용자 정보를 불러오도록 처리하고 컴포넌트를 렌더링하면 이러한 깜박임 현상이 발생하지 않는다.
